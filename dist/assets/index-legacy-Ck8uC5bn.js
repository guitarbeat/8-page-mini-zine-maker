System.register(["./pdfjs-legacy-Yk8rcL50.js","./jspdf-legacy-D9q7lL9a.js","./html2canvas-legacy-DIGTxsNk.js"],function(e,t){"use strict";var r,a,o;return{setters:[e=>{r=e.p},e=>{a=e.E},e=>{o=e.default}],execute:function(){var e=document.createElement("style");function t(e){if("number"!=typeof(t=e)||isNaN(t)||!isFinite(t))return"0 B";var t;const r=["B","KB","MB","GB"];let a=e,o=0;for(;a>=1024&&o<r.length-1;)a/=1024,o++;return`${a.toFixed(1)} ${r[o]}`}e.textContent='@import"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap";:root{--space-xs: .25rem;--space-sm: .5rem;--space-md: 1rem;--space-lg: 1.5rem;--space-xl: 2rem;--space-2xl: 3rem;--space-3xl: 4rem;--font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;--font-size-xs: .75rem;--font-size-sm: .875rem;--font-size-base: 1rem;--font-size-lg: 1.125rem;--font-size-xl: 1.25rem;--font-size-2xl: 1.5rem;--font-size-3xl: 2rem;--font-size-4xl: 2.5rem;--font-size-5xl: 3rem;--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600;--font-weight-bold: 700;--line-height-tight: 1.25;--line-height-normal: 1.5;--line-height-relaxed: 1.75;--color-bg-primary: #ffffff;--color-bg-secondary: #f8f9fa;--color-bg-elevated: #ffffff;--color-bg-overlay: rgba(0, 0, 0, .4);--color-text-primary: #0a0a0a;--color-text-secondary: #525252;--color-text-muted: #737373;--color-text-inverse: #ffffff;--color-border: #e5e5e5;--color-border-strong: #d4d4d4;--color-accent: #2563eb;--color-accent-hover: #1d4ed8;--color-accent-light: rgba(37, 99, 235, .1);--color-success: #16a34a;--color-error: #dc2626;--color-warning: #ea580c;--color-info: #2563eb;--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, .1), 0 10px 10px -5px rgba(0, 0, 0, .04);--motion-fast: .15s;--motion-base: .2s;--motion-slow: .3s;--motion-slower: .5s;--ease-in-out: cubic-bezier(.4, 0, .2, 1);--ease-out: cubic-bezier(0, 0, .2, 1);--ease-in: cubic-bezier(.4, 0, 1, 1);--radius-sm: .375rem;--radius-md: .5rem;--radius-lg: .75rem;--radius-xl: 1rem;--radius-full: 9999px;--z-base: 1;--z-elevated: 10;--z-dropdown: 100;--z-sticky: 200;--z-fixed: 300;--z-modal: 400;--z-toast: 500}[data-theme=dark]{--color-bg-primary: #0a0a0a;--color-bg-secondary: #171717;--color-bg-elevated: #262626;--color-bg-overlay: rgba(0, 0, 0, .6);--color-text-primary: #fafafa;--color-text-secondary: #a3a3a3;--color-text-muted: #737373;--color-text-inverse: #0a0a0a;--color-border: #404040;--color-border-strong: #525252;--color-accent: #3b82f6;--color-accent-hover: #2563eb;--color-accent-light: rgba(59, 130, 246, .15);--color-success: #22c55e;--color-error: #ef4444;--color-warning: #f97316;--color-info: #3b82f6}*{margin:0;padding:0;box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}body{font-family:var(--font-family);font-size:var(--font-size-base);line-height:var(--line-height-normal);font-weight:var(--font-weight-normal);color:var(--color-text-primary);background:var(--color-bg-primary);transition:background-color var(--motion-base) var(--ease-in-out),color var(--motion-base) var(--ease-in-out);min-height:100vh}h1,h2,h3,h4,h5,h6{font-weight:var(--font-weight-bold);line-height:var(--line-height-tight);color:var(--color-text-primary)}h1{font-size:var(--font-size-5xl);font-weight:var(--font-weight-bold);letter-spacing:-.02em}h2{font-size:var(--font-size-4xl);font-weight:var(--font-weight-bold);letter-spacing:-.01em}h3{font-size:var(--font-size-3xl);font-weight:var(--font-weight-semibold)}h4{font-size:var(--font-size-2xl)}h5{font-size:var(--font-size-xl)}h6{font-size:var(--font-size-lg)}p{margin-bottom:var(--space-md);color:var(--color-text-secondary)}.container{width:100%;max-width:1200px;margin:0 auto;padding:0 var(--space-lg)}.container[style*=max-width]{max-width:inherit}.section{margin-bottom:var(--space-lg)}.card{background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-xl);box-shadow:var(--shadow-sm);transition:box-shadow var(--motion-base) var(--ease-in-out),border-color var(--motion-base) var(--ease-in-out)}.card:hover{box-shadow:var(--shadow-md);border-color:var(--color-border-strong)}.card-header{margin-bottom:var(--space-lg);padding-bottom:var(--space-md);border-bottom:1px solid var(--color-border)}.card-title{font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin:0}.card-description{font-size:var(--font-size-sm);color:var(--color-text-secondary);margin-top:var(--space-xs);line-height:var(--line-height-relaxed)}.compact-header{background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);margin-bottom:var(--space-lg);box-shadow:var(--shadow-sm);display:flex;align-items:center;justify-content:space-between;gap:var(--space-lg)}.header-content{flex:1}.compact-header h1{font-size:var(--font-size-3xl);margin-bottom:var(--space-xs);letter-spacing:-.02em}.compact-header p{margin:0;font-size:var(--font-size-base)}.action-buttons{display:flex;gap:var(--space-sm);align-items:center}.btn-compact{padding:var(--space-sm) var(--space-md);font-size:var(--font-size-sm);min-height:2.5rem}.btn-compact svg{width:1rem;height:1rem}.btn-secondary{background:var(--color-bg-secondary);color:var(--color-text-primary);border:1px solid var(--color-border)}.btn-secondary:hover:not(:disabled){background:var(--color-border);border-color:var(--color-border-strong)}.btn{display:inline-flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-md) var(--space-xl);font-family:var(--font-family);font-size:var(--font-size-base);font-weight:var(--font-weight-medium);line-height:1;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--motion-base) var(--ease-in-out);text-decoration:none;position:relative;overflow:hidden}.btn:disabled{opacity:.6;cursor:not-allowed}.btn-primary{background:var(--color-accent);color:var(--color-text-inverse);box-shadow:var(--shadow-sm)}.btn-primary:hover:not(:disabled){background:var(--color-accent-hover);box-shadow:var(--shadow-md);transform:translateY(-1px)}.btn-primary:active:not(:disabled){transform:translateY(0);box-shadow:var(--shadow-sm)}.btn:focus-visible{outline:2px solid var(--color-accent);outline-offset:2px}.btn-success{background:var(--color-success);color:var(--color-text-inverse);box-shadow:var(--shadow-sm)}.btn-success:hover:not(:disabled){background:#15803d;box-shadow:var(--shadow-md);transform:translateY(-1px)}.btn-success:active:not(:disabled){transform:translateY(0);box-shadow:var(--shadow-sm)}.btn svg{width:1.25rem;height:1.25rem;flex-shrink:0}.upload-zone{border:2px dashed var(--color-border);border-radius:var(--radius-lg);padding:var(--space-3xl) var(--space-xl);text-align:center;cursor:pointer;transition:all var(--motion-base) var(--ease-in-out);background:var(--color-bg-secondary);position:relative;overflow:hidden}.upload-zone:hover{border-color:var(--color-accent);background:var(--color-accent-light)}.upload-zone.dragover{border-color:var(--color-accent);background:var(--color-accent-light);transform:scale(1.01)}.upload-zone.processing{opacity:.6;pointer-events:none;border-color:var(--color-border);background:var(--color-bg-secondary)}.upload-icon{width:3rem;height:3rem;color:var(--color-text-muted);margin:0 auto var(--space-md);transition:all var(--motion-base) var(--ease-in-out)}.upload-zone:hover .upload-icon,.upload-zone.dragover .upload-icon{color:var(--color-accent);transform:translateY(-2px)}.upload-zone:focus-visible{outline:2px solid var(--color-accent);outline-offset:2px}.upload-title{font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin-bottom:var(--space-xs)}.upload-subtitle{font-size:var(--font-size-base);color:var(--color-text-secondary);margin-bottom:var(--space-xs)}.upload-link{color:var(--color-accent);text-decoration:underline;text-underline-offset:2px}.upload-hint{font-size:var(--font-size-sm);color:var(--color-text-muted);margin-top:var(--space-sm)}.upload-section{margin-bottom:var(--space-lg)}.upload-container{max-width:32rem;margin:0 auto}.upload-zone.compact{padding:var(--space-xl) var(--space-lg);margin-bottom:var(--space-sm)}.upload-zone.compact .upload-title{font-size:var(--font-size-lg);margin-bottom:var(--space-xs)}.upload-zone.compact .upload-hint{margin-top:0;font-size:var(--font-size-xs)}.upload-status{font-size:var(--font-size-sm);margin:0}.zine{display:grid;grid-template-areas:"page5 page4 page3 page2" "page6 page7 page8 page1";grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(2,1fr);gap:var(--space-lg);padding:var(--space-xl);max-width:1200px;margin:0 auto;background:var(--color-bg-elevated);border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);border:1px solid var(--color-border);transition:box-shadow var(--motion-slow) var(--ease-in-out);position:relative;overflow:hidden}.zine>*{display:grid;grid-template-columns:repeat(15,1fr);grid-template-rows:repeat(21,1fr);background:var(--color-bg-primary);border:1px solid var(--color-border);aspect-ratio:15/21;overflow:hidden;position:relative;box-shadow:var(--shadow-sm);border-radius:var(--radius-md);transition:all var(--motion-base) var(--ease-in-out)}.zine>*:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);border-color:var(--color-accent);transition:transform var(--motion-base) var(--ease-out),box-shadow var(--motion-base) var(--ease-out),border-color var(--motion-base) var(--ease-out)}.zine.has-content{border-color:var(--color-success);box-shadow:var(--shadow-lg)}.zine:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 49%,rgba(59,130,246,.03) 50%,transparent 51%);background-size:20px 20px;pointer-events:none;opacity:.3;z-index:0}.zine:after{content:"Upload a PDF to transform these placeholders into your zine pages";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--color-bg-elevated);color:var(--color-text-muted);padding:var(--space-lg);border-radius:var(--radius-lg);border:2px dashed var(--color-accent-light);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);text-align:center;max-width:300px;line-height:var(--line-height-relaxed);box-shadow:var(--shadow-lg);z-index:2;opacity:.8;transition:opacity var(--motion-base) var(--ease-in-out)}.zine.has-content:after{display:none}.zine.has-content:before{display:none}.zine>*:nth-child(1){grid-area:page1}.zine>*:nth-child(2){grid-area:page2}.zine>*:nth-child(3){grid-area:page3}.zine>*:nth-child(4){grid-area:page4}.zine>*:nth-child(5){grid-area:page5}.zine>*:nth-child(6){grid-area:page6}.zine>*:nth-child(7){grid-area:page7}.zine>*:nth-child(8){grid-area:page8}.page-content{grid-column:1 / -1;grid-row:1 / -1;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:var(--radius-sm)}.page-content img{width:100%;height:100%;object-fit:contain;transition:transform var(--motion-base) var(--ease-in-out);display:block;position:relative;z-index:1}.page-number{position:absolute;top:var(--space-sm);left:var(--space-sm);background:var(--color-accent);color:var(--color-text-inverse);border-radius:var(--radius-full);width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);z-index:10;box-shadow:var(--shadow-md)}.placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--color-text-muted);text-align:center;padding:var(--space-xl)}.placeholder svg{width:2rem;height:2rem;margin-bottom:var(--space-sm);opacity:.4}.placeholder.enhanced{padding:var(--space-lg);position:relative}.placeholder-icon{margin-bottom:var(--space-md);opacity:.6;transition:opacity var(--motion-base) var(--ease-in-out)}.placeholder.enhanced:hover .placeholder-icon{opacity:.8}.placeholder-icon svg{width:3rem;height:3rem;stroke:var(--color-accent)}.placeholder-content{margin-bottom:var(--space-lg)}.placeholder-title{font-size:var(--font-size-lg);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin-bottom:var(--space-xs);letter-spacing:-.01em}.placeholder-desc{font-size:var(--font-size-sm);color:var(--color-text-secondary);line-height:var(--line-height-normal);margin:0}.placeholder-hint{display:flex;flex-direction:column;align-items:center;gap:var(--space-xs);opacity:.7}.hint-text{font-size:var(--font-size-xs);color:var(--color-accent);font-weight:var(--font-weight-medium)}.hint-arrow svg{width:1rem;height:1rem;color:var(--color-accent);animation:bounce-gentle 2s infinite}@keyframes bounce-gentle{0%,20%,50%,80%,to{transform:translateY(0)}40%{transform:translateY(-2px)}60%{transform:translateY(-1px)}}.preview-rotated{position:relative}.preview-rotated:after{content:"";position:absolute;top:var(--space-sm);right:var(--space-sm);width:1.5rem;height:1.5rem;background:var(--color-info);border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;font-size:.625rem;font-weight:var(--font-weight-bold);color:#fff;z-index:5;box-shadow:var(--shadow-sm)}.preview-rotated:after{content:"â†»";font-size:.75rem}.preview-rotated .placeholder{position:relative}.preview-rotated .placeholder:before{content:"Will be rotated in final print";position:absolute;bottom:var(--space-sm);left:50%;transform:translate(-50%);font-size:var(--font-size-xs);color:var(--color-info);background:var(--color-bg-elevated);padding:var(--space-xs) var(--space-sm);border-radius:var(--radius-sm);border:1px solid var(--color-border);white-space:nowrap;opacity:0;transition:opacity var(--motion-base) var(--ease-in-out);pointer-events:none}.preview-rotated:hover .placeholder:before{opacity:1}.slider{-webkit-appearance:none;appearance:none;width:100%;height:.5rem;background:var(--color-border);border-radius:var(--radius-full);outline:none;cursor:pointer;transition:background var(--motion-base) var(--ease-in-out)}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:1.25rem;height:1.25rem;background:var(--color-accent);border-radius:var(--radius-full);cursor:pointer;box-shadow:var(--shadow-md);transition:all var(--motion-base) var(--ease-in-out);border:2px solid var(--color-bg-primary)}.slider::-webkit-slider-thumb:hover{transform:scale(1.15);box-shadow:var(--shadow-lg)}.slider::-moz-range-thumb{width:1.25rem;height:1.25rem;background:var(--color-accent);border-radius:var(--radius-full);cursor:pointer;box-shadow:var(--shadow-md);transition:all var(--motion-base) var(--ease-in-out);border:2px solid var(--color-bg-primary)}.slider::-moz-range-thumb:hover{transform:scale(1.15);box-shadow:var(--shadow-lg)}.slider-label{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-md);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-secondary)}.slider-value{font-weight:var(--font-weight-semibold);color:var(--color-accent)}.slider-ticks{display:flex;justify-content:space-between;margin-top:var(--space-xs);font-size:var(--font-size-xs);color:var(--color-text-muted)}.progress-container{display:none}.progress-container.active{display:block}.progress-bar{width:100%;height:.5rem;background:var(--color-border);border-radius:var(--radius-full);overflow:hidden;position:relative}.progress-fill{height:100%;background:var(--color-accent);border-radius:var(--radius-full);width:0%;transition:width var(--motion-base) var(--ease-out);position:relative;overflow:hidden}.progress-fill:after{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);animation:shimmer 1.5s infinite}@keyframes shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}.progress-text{text-align:center;margin-top:var(--space-sm);font-size:var(--font-size-sm);color:var(--color-text-secondary);font-weight:var(--font-weight-medium)}.progress-container{margin-bottom:var(--space-lg)}.progress-wrapper{max-width:32rem;margin:0 auto;background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm)}.progress-container .progress-text{margin-top:var(--space-md);text-align:center;font-weight:var(--font-weight-medium)}.settings-panel{margin-bottom:var(--space-lg)}.settings-content{max-width:32rem;margin:0 auto;background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:var(--space-lg);box-shadow:var(--shadow-sm)}.setting-label{display:block;font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin-bottom:var(--space-sm)}.scale-controls{display:flex;align-items:center;gap:var(--space-md)}.scale-value{font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);color:var(--color-accent);min-width:3rem;text-align:right}.layout-preview{text-align:center}.layout-label{font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-secondary);margin-bottom:var(--space-sm)}.layout-grid{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(2,1fr);gap:var(--space-xs);margin-bottom:var(--space-sm);font-family:monospace;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-primary);background:var(--color-accent-light);padding:var(--space-sm);border-radius:var(--radius-md);border:1px solid var(--color-border)}.layout-grid span{display:flex;align-items:center;justify-content:center;background:var(--color-bg-primary);border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:var(--space-xs);min-height:2rem}.layout-note{font-size:var(--font-size-xs);color:var(--color-success);font-weight:var(--font-weight-medium)}.theme-toggle{position:fixed;top:var(--space-lg);right:var(--space-lg);z-index:var(--z-fixed);background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-full);width:3rem;height:3rem;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow-md);transition:all var(--motion-base) var(--ease-in-out)}.theme-toggle:hover{transform:scale(1.05);box-shadow:var(--shadow-lg);border-color:var(--color-accent)}.theme-toggle svg{width:1.25rem;height:1.25rem;color:var(--color-text-primary);transition:transform var(--motion-base) var(--ease-in-out)}.theme-toggle:hover svg{transform:rotate(15deg)}.toast-container{position:fixed;top:var(--space-lg);left:var(--space-lg);z-index:var(--z-toast);display:flex;flex-direction:column;gap:var(--space-sm)}.toast{background:var(--color-bg-elevated);border:1px solid var(--color-border);border-left-width:4px;border-radius:var(--radius-md);padding:var(--space-md) var(--space-lg);min-width:20rem;max-width:24rem;box-shadow:var(--shadow-lg);display:flex;align-items:flex-start;gap:var(--space-md);transform:translate(-100%);opacity:0;transition:all var(--motion-base) var(--ease-out);position:relative;overflow:hidden}.toast.show{transform:translate(0);opacity:1}.toast.success{border-left-color:var(--color-success)}.toast.error{border-left-color:var(--color-error)}.toast.warning{border-left-color:var(--color-warning)}.toast.info{border-left-color:var(--color-info)}.toast-icon{flex-shrink:0;width:1.25rem;height:1.25rem;margin-top:.125rem}.toast-content{flex:1}.toast-title{font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin-bottom:var(--space-xs);font-size:var(--font-size-sm)}.toast-message{color:var(--color-text-secondary);font-size:var(--font-size-xs);line-height:var(--line-height-relaxed)}.toast-close{background:none;border:none;color:var(--color-text-muted);cursor:pointer;padding:var(--space-xs);border-radius:var(--radius-sm);transition:all var(--motion-fast) var(--ease-in-out);flex-shrink:0;display:flex;align-items:center;justify-content:center}.toast-close:hover{background:var(--color-bg-secondary);color:var(--color-text-primary)}.toast-close svg{width:1rem;height:1rem}@keyframes fadeInUp{0%{opacity:0;transform:translateY(var(--space-md))}to{opacity:1;transform:translateY(0)}}.fade-in-up{animation:fadeInUp var(--motion-slow) var(--ease-out) forwards}@keyframes scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.scale-in{animation:scaleIn var(--motion-base) var(--ease-out) forwards}.text-center{text-align:center}.text-primary{color:var(--color-text-primary)}.text-secondary{color:var(--color-text-secondary)}.text-muted{color:var(--color-text-muted)}.text-success{color:var(--color-success)}.text-error{color:var(--color-error)}.hidden{display:none}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.sr-only-focusable:focus{position:static;width:auto;height:auto;padding:var(--space-sm) var(--space-md);margin:0;overflow:visible;clip:auto;white-space:normal;border:2px solid var(--color-accent);border-radius:var(--radius-md);background:var(--color-bg-elevated);color:var(--color-text-primary);text-decoration:none;font-weight:var(--font-weight-medium);z-index:1000}.btn-group{display:flex;flex-wrap:wrap;gap:var(--space-md);justify-content:center}@media (max-width: 768px){.btn-group{flex-direction:column}.btn-group .btn{width:100%}}@media (max-width: 1024px){.zine{gap:var(--space-md);padding:var(--space-lg)}}@media (max-width: 768px){:root{--font-size-5xl: 2rem;--font-size-4xl: 1.75rem}.container{padding:0 var(--space-md)}.compact-header{flex-direction:column;align-items:stretch;gap:var(--space-md);padding:var(--space-md)}.action-buttons{justify-content:center}.compact-header h1{font-size:var(--font-size-2xl)}.upload-container{max-width:none}.upload-zone.compact{padding:var(--space-lg)}.settings-content{max-width:none}.scale-controls{flex-direction:column;align-items:stretch;gap:var(--space-sm)}.scale-value{text-align:center;min-width:auto}.placeholder.enhanced{padding:var(--space-md)}.placeholder-icon svg{width:2.5rem;height:2.5rem}.placeholder-title{font-size:var(--font-size-base)}.placeholder-desc{font-size:var(--font-size-xs)}.zine:after{font-size:var(--font-size-xs);padding:var(--space-md);max-width:250px}.zine{grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(4,1fr);grid-template-areas:"page1 page2" "page3 page4" "page5 page6" "page7 page8";gap:var(--space-md);padding:var(--space-md)}.card{padding:var(--space-lg)}.btn{padding:var(--space-md) var(--space-lg);min-height:3rem}.theme-toggle{width:2.5rem;height:2.5rem;top:var(--space-md);right:var(--space-md)}.toast-container{top:var(--space-md);left:var(--space-md)}.toast{min-width:18rem;max-width:calc(100vw - 2rem)}}@media (max-width: 480px){.zine{grid-template-columns:1fr;grid-template-rows:repeat(8,1fr);grid-template-areas:"page1" "page2" "page3" "page4" "page5" "page6" "page7" "page8";gap:var(--space-sm);padding:var(--space-md)}.card{padding:var(--space-md)}.upload-zone{padding:var(--space-2xl) var(--space-lg)}.upload-title{font-size:var(--font-size-lg)}}.toast-container{position:fixed;top:var(--space-xl);right:var(--space-xl);z-index:var(--z-toast);display:flex;flex-direction:column;gap:var(--space-md);pointer-events:none}.toast{display:flex;align-items:flex-start;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);color:var(--color-text-primary);font-family:var(--font-family);font-size:var(--font-size-sm);line-height:var(--line-height-normal);pointer-events:auto;transform:translate(100%);opacity:0;transition:all var(--motion-base) var(--ease-out);max-width:400px;min-width:300px}.toast-visible{transform:translate(0);opacity:1}.toast-icon{flex-shrink:0;width:24px;height:24px;color:var(--color-text-primary)}.toast-content{flex:1;min-width:0}.toast-title{font-weight:var(--font-weight-semibold);margin-bottom:var(--space-xs)}.toast-message{color:var(--color-text-secondary);font-size:var(--font-size-xs)}.toast-close{flex-shrink:0;background:none;border:none;color:var(--color-text-muted);cursor:pointer;padding:var(--space-xs);border-radius:var(--radius-sm);transition:color var(--motion-fast) var(--ease-out)}.toast-close:hover{color:var(--color-text-primary)}.toast-success{border-color:var(--color-success);background:rgba(34,197,94,.1)}.toast-success .toast-icon{color:var(--color-success)}.toast-error{border-color:var(--color-error);background:rgba(239,68,68,.1)}.toast-error .toast-icon{color:var(--color-error)}.toast-warning{border-color:var(--color-warning);background:rgba(245,158,11,.1)}.toast-warning .toast-icon{color:var(--color-warning)}.toast-info{border-color:var(--color-info);background:rgba(59,130,246,.1)}.toast-info .toast-icon{color:var(--color-info)}[data-theme=dark] .toast{background:var(--color-bg-secondary);border-color:var(--color-border-strong)}@media (max-width: 480px){.toast-container{top:var(--space-md);right:var(--space-md);left:var(--space-md)}.toast{min-width:auto;max-width:none}}@keyframes fade-in-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes scale-in{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.fade-in-up{animation:fade-in-up var(--motion-slow) var(--ease-out) forwards}.scale-in{animation:scale-in var(--motion-base) var(--ease-out) forwards}.animate-spin{animation:spin 1s linear infinite}@media print{html,body{background-color:#fff;margin:0;padding:0;width:100%;height:100%;overflow:hidden}.no-print{display:none!important}.zine{display:grid;grid-template-areas:"page5 page4 page3 page2" "page6 page7 page8 page1";width:100%;height:100%;gap:0;padding:0;margin:0;position:fixed;top:0;left:0;background:#fff;border:none;box-shadow:none}.zine:before{content:"";position:absolute;top:50%;left:0;right:0;height:2px;background:repeating-linear-gradient(to right,#000 0px,#000 10px,transparent 10px,transparent 20px);z-index:10;pointer-events:none}.zine>*:nth-child(1){grid-area:page1}.zine>*:nth-child(2){grid-area:page2}.zine>*:nth-child(3){grid-area:page3}.zine>*:nth-child(4){grid-area:page4}.zine>*:nth-child(5){grid-area:page5}.zine>*:nth-child(6){grid-area:page6}.zine>*:nth-child(7){grid-area:page7}.zine>*:nth-child(8){grid-area:page8}.zine>*:nth-child(5),.zine>*:nth-child(4),.zine>*:nth-child(3),.zine>*:nth-child(2){transform:rotate(180deg)}.zine>*{width:100%;height:100%;border:none;box-shadow:none}.page-number{display:none}}.settings-panel{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1000;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity var(--motion-base) var(--ease-out),visibility var(--motion-base) var(--ease-out)}.settings-panel:not(.hidden){opacity:1;visibility:visible}.settings-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);backdrop-filter:blur(2px)}.settings-content{position:relative;background:var(--color-bg-primary);border:1px solid var(--color-border);border-radius:var(--radius-xl);box-shadow:var(--shadow-xl);max-width:400px;width:90%;max-height:80vh;overflow-y:auto;margin:var(--space-lg)}.settings-header{display:flex;align-items:center;justify-content:space-between;padding:var(--space-lg);border-bottom:1px solid var(--color-border)}.settings-title{font-size:var(--font-size-lg);font-weight:var(--font-weight-semibold);color:var(--color-text-primary);margin:0}.settings-close{background:none;border:none;color:var(--color-text-secondary);cursor:pointer;padding:var(--space-xs);border-radius:var(--radius-sm);transition:color var(--motion-base) var(--ease-out),background-color var(--motion-base) var(--ease-out)}.settings-close:hover{color:var(--color-text-primary);background-color:var(--color-bg-hover)}.settings-body{padding:var(--space-lg)}.setting-group{margin-bottom:var(--space-lg)}.setting-group:last-child{margin-bottom:0}.setting-label{display:block;font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-primary);margin-bottom:var(--space-sm)}.setting-select{width:100%;padding:var(--space-sm) var(--space-md);border:1px solid var(--color-border);border-radius:var(--radius-md);background:var(--color-bg-primary);color:var(--color-text-primary);font-size:var(--font-size-base);transition:border-color var(--motion-base) var(--ease-out),box-shadow var(--motion-base) var(--ease-out)}.setting-select:focus{outline:none;border-color:var(--color-accent);box-shadow:0 0 0 3px rgba(59,130,246,.1)}.setting-info{margin-top:var(--space-lg);padding:var(--space-md);background:var(--color-bg-elevated);border:1px solid var(--color-border);border-radius:var(--radius-md)}.setting-info p{font-size:var(--font-size-sm);color:var(--color-text-secondary);margin:0}[data-theme=dark] .settings-content{background:var(--color-bg-elevated);border-color:var(--color-border)}[data-theme=dark] .settings-header{border-bottom-color:var(--color-border)}.zine-tabs{display:flex;justify-content:center;gap:var(--space-sm);margin-bottom:var(--space-lg);padding:var(--space-sm);background:var(--color-bg-secondary);border-radius:var(--radius-lg);max-width:400px;margin-left:auto;margin-right:auto}.zine-tab{display:inline-flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-lg);font-family:var(--font-family);font-size:var(--font-size-sm);font-weight:var(--font-weight-medium);color:var(--color-text-secondary);background:transparent;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--motion-base) var(--ease-in-out)}.zine-tab:hover{color:var(--color-text-primary);background:var(--color-bg-elevated)}.zine-tab.active{color:var(--color-text-inverse);background:var(--color-accent);box-shadow:var(--shadow-sm)}.zine-tab svg{width:1rem;height:1rem;flex-shrink:0}.zine-tab-pages{font-size:var(--font-size-xs);opacity:.8}.zine-tab.active .zine-tab-pages{opacity:.9}[data-theme=dark] .zine-tabs{background:var(--color-bg-elevated)}[data-theme=dark] .zine-tab:hover{background:var(--color-border)}\n/*$vite$:1*/',document.head.appendChild(e);class i{constructor(){this.pdf=null,this.isProcessing=!1}async initialize(){r.GlobalWorkerOptions.workerSrc="/pdf.worker.min.js"}validateFile(e){const r=[];if(!e)return r.push("No file selected"),{valid:!1,errors:r};"application/pdf"!==e.type&&r.push("Please select a PDF file");const a=52428800;return e.size>a&&r.push(`File too large (${t(e.size)}). Maximum size is ${t(a)}`),0===e.size&&r.push("File appears to be empty"),{valid:0===r.length,errors:r}}async loadPDF(e,t=null){if(this.isProcessing)throw new Error("PDF processing already in progress");this.isProcessing=!0;try{const a=this.validateFile(e);if(!a.valid)throw new Error(a.errors.join(". "));t?.("Reading PDF file...");const o=await this.readFileAsArrayBuffer(e);t?.("Processing PDF...");const i=r.getDocument({data:o,verbosity:0}).promise,n=new Promise((e,t)=>setTimeout(()=>t(new Error("PDF loading timed out")),3e4));this.pdf=await Promise.race([i,n]);const s=this.pdf.numPages;if(0===s)throw new Error("PDF appears to be empty or corrupted");return{pdf:this.pdf,numPages:s,fileName:e.name,fileSize:e.size}}catch(a){throw console.error("PDF loading error:",a),this.handlePDFError(a)}finally{this.isProcessing=!1}}readFileAsArrayBuffer(e){return new Promise((t,r)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>r(new Error("Failed to read file")),a.onabort=()=>r(new Error("File reading was cancelled")),a.readAsArrayBuffer(e)})}async renderPage(e,t=null){if(!this.pdf)throw new Error("No PDF loaded");try{t?.(`Rendering page ${e}...`);const r=await this.pdf.getPage(e),a=1.5,o=r.getViewport({scale:a}),i=document.createElement("canvas"),n=i.getContext("2d",{alpha:!1});i.width=Math.floor(o.width),i.height=Math.floor(o.height),n.fillStyle="#ffffff",n.fillRect(0,0,i.width,i.height);const s={canvasContext:n,viewport:o,background:"white"};return await r.render(s).promise,console.log(`Rendered page ${e}, canvas size: ${i.width}x${i.height}`),i}catch(r){throw console.error(`Failed to render page ${e}:`,r),new Error(`Failed to render page ${e}`)}}canvasToDataURL(e,t="image/jpeg",r=.85){try{const a=e.toDataURL(t,r);return console.log(`Generated data URL, format: ${t}, size: ${a.length} chars`),a}catch(a){return console.warn(`Failed to generate ${t}, falling back to PNG:`,a),e.toDataURL("image/png",1)}}canvasToBlob(e,t="image/jpeg",r=.85){return new Promise((a,o)=>{try{e.toBlob(e=>{e?(console.log(`Generated blob, format: ${t}, size: ${e.size} bytes`),a(e)):o(new Error("Canvas to Blob conversion failed"))},t,r)}catch(i){o(i)}})}handlePDFError(e){const t=e.message||"Unknown error";return t.includes("timed out")?new Error("PDF loading timed out. The file may be corrupted or too large."):t.includes("corrupted")||t.includes("InvalidPDFException")?new Error("The PDF file appears to be corrupted or invalid."):t.includes("password")||t.includes("protected")?new Error("The PDF file is password-protected."):t.includes("not loaded")||t.includes("MissingPDFException")?new Error("PDF.js library failed to load. Please refresh the page."):new Error(`PDF processing failed: ${t}`)}cleanup(){this.pdf&&(this.pdf.destroy(),this.pdf=null),this.isProcessing=!1}}function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function s(){for(var e,t,r=0,a="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}const l=new class{constructor(){this.container=null,this.init()}init(){this.container||(this.container=document.createElement("div"),this.container.id="toast-container",this.container.className="toast-container",this.container.setAttribute("aria-live","polite"),document.body.appendChild(this.container))}show(e,t,r="",a=5e3){const o=document.createElement("div");o.className=`toast toast-${e}`,o.setAttribute("role","alert");const i=`\n      <div class="toast-icon">${this.getIcon(e)}</div>\n      <div class="toast-content">\n        <div class="toast-title">${t}</div>\n        ${r?`<div class="toast-message">${r}</div>`:""}\n      </div>\n      <button class="toast-close" aria-label="Close notification">&times;</button>\n    `;return o.innerHTML=i,this.container.appendChild(o),o.querySelector(".toast-close").addEventListener("click",()=>this.remove(o)),a>0&&setTimeout(()=>{o.parentNode&&this.remove(o)},a),requestAnimationFrame(()=>{o.classList.add("toast-visible")}),o}remove(e){e.classList.remove("toast-visible"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300)}getIcon(e){const t={success:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>\n        <polyline points="22,4 12,14.01 9,11.01"/>\n      </svg>',error:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <circle cx="12" cy="12" r="10"/>\n        <line x1="15" y1="9" x2="9" y2="15"/>\n        <line x1="9" y1="9" x2="15" y2="15"/>\n      </svg>',warning:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>\n        <line x1="12" y1="9" x2="12" y2="13"/>\n        <line x1="12" y1="17" x2="12.01" y2="17"/>\n      </svg>',info:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n        <circle cx="12" cy="12" r="10"/>\n        <path d="M12 16v-4"/>\n        <path d="M12 8h.01"/>\n      </svg>'};return t[e]||t.info}success(e,t,r){return this.show("success",e,t,r)}error(e,t,r){return this.show("error",e,t,r)}warning(e,t,r){return this.show("warning",e,t,r)}info(e,t,r){return this.show("info",e,t,r)}};class d{constructor(){var e;this.emitter={all:e=e||new Map,on:function(t,r){var a=e.get(t);a?a.push(r):e.set(t,[r])},off:function(t,r){var a=e.get(t);a&&(r?a.splice(a.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var a=e.get(t);a&&a.slice().map(function(e){e(r)}),(a=e.get("*"))&&a.slice().map(function(e){e(t,r)})}},this.elements={},this.currentScale=100,this.isDarkMode=!1,this.paperSize="a4",this.orientation="landscape",this.init()}init(){this.cacheElements(),this.setupTheme(),this.loadSettings(),this.setupEventListeners(),this.setupKeyboardShortcuts()}cacheElements(){const e=e=>document.querySelector(e);this.elements={zine:e(".zine"),printBtn:e("#printBtn"),exportPdfBtn:e("#exportPdfBtn"),settingsBtn:e("#settingsBtn"),pdfUpload:e("#pdf-upload"),uploadStatus:e("#upload-status"),uploadZone:e("#upload-zone"),uploadLink:e(".upload-link"),themeToggle:e("#themeToggle"),themeIcon:e("#themeIcon"),scaleSlider:e("#scale-slider"),scaleValue:e("#scale-value"),progressContainer:e("#progress-container"),progressFill:e("#progress-fill"),progressText:e("#progress-text"),actionButtons:e("#action-buttons"),settingsPanel:e("#settings-panel"),paperSizeSelect:e("#paper-size-select"),orientationSelect:e("#orientation-select"),settingsCloseBtn:e(".settings-close"),settingsOverlay:e(".settings-overlay"),toastContainer:e("#toast-container"),zineTabs:e("#zine-tabs"),zineTab1:e("#zine-tab-1"),zineTab2:e("#zine-tab-2")}}setupTheme(){this.isDarkMode="dark"===localStorage.getItem("theme")||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches,this.updateTheme(),this.updateThemeToggleAria()}updateTheme(){document.documentElement.setAttribute("data-theme",this.isDarkMode?"dark":"light"),localStorage.setItem("theme",this.isDarkMode?"dark":"light"),this.emitter.emit("themeChanged",{isDarkMode:this.isDarkMode})}toggleTheme(){this.isDarkMode=!this.isDarkMode,this.updateTheme(),this.updateThemeToggleAria(),l.info("Theme",`Switched to ${this.isDarkMode?"dark":"light"} mode`)}updateThemeToggleAria(){this.elements.themeToggle&&(this.elements.themeToggle.setAttribute("aria-pressed",this.isDarkMode.toString()),this.elements.themeToggle.setAttribute("aria-label",`Switch to ${this.isDarkMode?"light":"dark"} mode`))}setupEventListeners(){this.elements.themeToggle?.addEventListener("click",()=>this.toggleTheme()),this.elements.settingsBtn?.addEventListener("click",()=>this.toggleSettings()),this.elements.settingsCloseBtn?.addEventListener("click",()=>this.setSettingsVisible(!1)),this.elements.settingsOverlay?.addEventListener("click",()=>this.setSettingsVisible(!1)),this.elements.zineTab1?.addEventListener("click",()=>{this.setActiveTab(1),this.emitter.emit("zineTabChanged",1)}),this.elements.zineTab2?.addEventListener("click",()=>{this.setActiveTab(2),this.emitter.emit("zineTabChanged",2)}),this.elements.paperSizeSelect?.addEventListener("change",e=>this.updatePaperSize(e.target.value)),this.elements.orientationSelect?.addEventListener("change",e=>this.updateOrientation(e.target.value)),this.elements.uploadZone?.addEventListener("click",()=>this.triggerFileUpload()),this.elements.uploadZone?.addEventListener("dragover",e=>this.handleDragOver(e)),this.elements.uploadZone?.addEventListener("dragleave",e=>this.handleDragLeave(e)),this.elements.uploadZone?.addEventListener("drop",e=>this.handleFileDrop(e)),this.elements.uploadLink?.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.triggerFileUpload()}),this.elements.scaleSlider?.addEventListener("input",function(e,t){let r;return function(...a){clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),e(...a)},t)}}(e=>{this.updateScale(parseInt(e.target.value))},100)),document.addEventListener("keydown",e=>this.handleKeyboard(e))}setActiveTab(e){this.elements.zineTab1&&this.elements.zineTab2&&(this.elements.zineTab1.className=s("tab-btn",{active:1===e}),this.elements.zineTab2.className=s("tab-btn",{active:2===e}),this.elements.zineTab1.setAttribute("aria-selected",(1===e).toString()),this.elements.zineTab2.setAttribute("aria-selected",(2===e).toString()))}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{"Space"!==e.code||e.target.matches("input, textarea, [contenteditable]")||(e.preventDefault(),this.toggleTheme())})}triggerFileUpload(){this.elements.pdfUpload?.click()}handleDragOver(e){e.preventDefault(),e.stopPropagation(),this.elements.uploadZone&&(this.elements.uploadZone.className=s(this.elements.uploadZone.className,"dragover"))}handleDragLeave(e){e.preventDefault(),e.stopPropagation(),this.elements.uploadZone&&!this.elements.uploadZone.contains(e.relatedTarget)&&this.elements.uploadZone.classList.remove("dragover")}handleFileDrop(e){e.preventDefault(),e.stopPropagation(),this.elements.uploadZone?.classList.remove("dragover");const t=e.dataTransfer.files;if(t.length>0){const e=t[0];"application/pdf"===e.type?this.emitter.emit("fileSelected",{file:e,source:"drop"}):l.error("Invalid File","Please drop a PDF file")}}handleKeyboard(e){e.ctrlKey&&"o"===e.key&&(e.preventDefault(),this.triggerFileUpload()),e.ctrlKey&&"p"===e.key&&(e.preventDefault(),this.emitter.emit("print")),e.ctrlKey&&"s"===e.key&&(e.preventDefault(),this.emitter.emit("export")),"Enter"!==e.key&&" "!==e.key||e.target!==this.elements.uploadZone||(e.preventDefault(),this.triggerFileUpload()),"Escape"!==e.key||this.elements.settingsPanel?.classList.contains("hidden")||(e.preventDefault(),this.setSettingsVisible(!1))}updateScale(e){this.currentScale=Math.max(50,Math.min(200,e)),this.elements.scaleValue.textContent=this.currentScale+"%",this.elements.scaleSlider.value=this.currentScale,this.elements.zine&&(this.elements.zine.classList.add("scaled"),this.elements.zine.style.transform=`scale(${this.currentScale/100})`),document.querySelectorAll(".page-content").forEach(e=>{e.classList.add("scaled"),e.style.transform=`scale(${this.currentScale/100})`}),document.querySelectorAll(".page-content img").forEach(e=>{e.classList.add("scaled"),e.style.transform=`scale(${this.currentScale/100})`})}showProgress(e,t=0){this.elements.progressContainer&&(this.elements.progressContainer.classList.remove("hidden"),this.elements.progressText.textContent=e,this.elements.progressFill&&(this.elements.progressFill.style.width=t+"%")),this.setUploadZoneProcessing(!0)}setUploadZoneProcessing(e){this.elements.uploadZone&&(this.elements.uploadZone.className=s(this.elements.uploadZone.className,{processing:e}),e?this.elements.uploadZone.setAttribute("aria-disabled","true"):this.elements.uploadZone.removeAttribute("aria-disabled"))}hideProgress(){this.elements.progressContainer&&this.elements.progressContainer.classList.add("hidden"),this.setUploadZoneProcessing(!1)}setStatus(e,t="info"){this.elements.uploadStatus&&(this.elements.uploadStatus.textContent=e,this.elements.uploadStatus.className=s("text-center text-muted",{"text-green-600 font-bold":"success"===t,"text-red-500 font-bold":"error"===t,"text-blue-600 font-bold":"loading"===t}))}updatePagePreview(e,t){const r=e>8?e-8:e,a=document.querySelector(`#preview-${r}`);if(!a)return void console.error(`Preview image element for page ${e} (mapped to ${r}) not found`);const o=document.querySelector(`#content-${r} .placeholder`);o&&(o.style.transition="opacity 0.3s ease",o.style.opacity="0"),a.onload=()=>{a.classList.add("scale-in"),o&&setTimeout(()=>{o.style.display="none"},300)},a.onerror=t=>{console.error(`Failed to load page ${e} preview:`,t),o&&(o.style.opacity="1",o.style.display="flex"),l.error(`Page ${e} Error`,"Failed to load page preview")};try{a.src=t}catch(i){console.error(`Error setting page ${e} preview src:`,i),o&&(o.style.opacity="1",o.style.display="flex")}}hasContent(){const e=document.querySelectorAll(".page-content img");return Array.from(e).some(e=>e.src&&""!==e.src)}toggleSettings(){const e=!this.elements.settingsPanel?.classList.contains("hidden");this.setSettingsVisible(!e),e||setTimeout(()=>{const e=this.elements.settingsPanel?.querySelector("input, button, select, textarea");e?.focus()},100)}setSettingsVisible(e){this.elements.settingsPanel&&(e?(this.elements.settingsPanel.classList.remove("hidden"),this.elements.settingsBtn?.setAttribute("aria-expanded","true")):(this.elements.settingsPanel.classList.add("hidden"),this.elements.settingsBtn?.setAttribute("aria-expanded","false")))}showActionButtons(){this.elements.actionButtons?.classList.remove("hidden"),this.elements.zine?.classList.add("has-content"),this.setStatus("PDF processed successfully. Ready to print or export.","success")}hideActionButtons(){this.elements.actionButtons?.classList.add("hidden"),this.setSettingsVisible(!1)}emit(e,t){this.emitter.emit(e,t)}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}loadSettings(){this.paperSize=localStorage.getItem("paperSize")||"a4",this.orientation=localStorage.getItem("orientation")||"landscape",this.elements.paperSizeSelect&&(this.elements.paperSizeSelect.value=this.paperSize),this.elements.orientationSelect&&(this.elements.orientationSelect.value=this.orientation)}updatePaperSize(e){this.paperSize=e,localStorage.setItem("paperSize",e),this.emitter.emit("paperSizeChanged",{paperSize:e,orientation:this.orientation}),l.info("Paper Size",`Changed to ${this.getPaperSizeLabel(e)}`)}updateOrientation(e){this.orientation=e,localStorage.setItem("orientation",e),this.emitter.emit("orientationChanged",{paperSize:this.paperSize,orientation:e}),l.info("Orientation",`Changed to ${e.charAt(0).toUpperCase()+e.slice(1)}`)}getPaperDimensions(e,t){const r={a4:{width:210,height:297},a3:{width:297,height:420},letter:{width:215.9,height:279.4},legal:{width:215.9,height:355.6},a5:{width:148,height:210}},a=r[e]||r.a4;return"portrait"===t?{width:a.height,height:a.width}:a}getPaperSizeLabel(e){return{a4:"A4",a3:"A3",letter:"Letter",legal:"Legal",a5:"A5"}[e]||"A4"}toggleTabs(e){this.elements.zineTabs&&(e?this.elements.zineTabs.classList.remove("hidden"):this.elements.zineTabs.classList.add("hidden"))}}
/**
       * @license lucide v0.562.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */const c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},p=([e,t,r])=>{const a=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.keys(t).forEach(e=>{a.setAttribute(e,String(t[e]))}),r?.length&&r.forEach(e=>{const t=p(e);a.appendChild(t)}),a},h=e=>"string"==typeof e?e:e&&e.class?e.class&&"string"==typeof e.class?e.class.split(" "):e.class&&Array.isArray(e.class)?e.class:"":"",g=(e,{nameAttr:t,icons:r,attrs:a})=>{const o=e.getAttribute(t);if(null==o)return;const i=r[o.replace(/(\w)(\w*)(_|-|\s*)/g,(e,t,r)=>t.toUpperCase()+r.toLowerCase())];if(!i)return console.warn(`${e.outerHTML} icon name was not found in the provided icons object.`);const n=(e=>Array.from(e.attributes).reduce((e,t)=>(e[t.name]=t.value,e),{}))(e),s={...c,"data-lucide":o,...a,...n},l=["lucide",`lucide-${o}`,n,a].flatMap(h).map(e=>e.trim()).filter(Boolean).filter((e,t,r)=>r.indexOf(e)===t).join(" ");l&&Object.assign(s,{class:l});const d=((e,t={})=>{const r={...c,...t};return p(["svg",r,e])})(i,s);return e.parentNode?.replaceChild(d,e)},m=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]],v=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]],u=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]],f=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],b=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],w=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}]],x=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]],y=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"}]],z=({icons:e={},nameAttr:t="data-lucide",attrs:r={},root:a=document,inTemplates:o}={})=>{if(!Object.values(e).length)throw new Error("Please provide an icons object.\nIf you want to use all the icons you can import it like:\n `import { createIcons, icons } from 'lucide';\nlucide.createIcons({icons});`");if(void 0===a)throw new Error("`createIcons()` only works in a browser environment.");if(Array.from(a.querySelectorAll(`[${t}]`)).forEach(a=>g(a,{nameAttr:t,icons:e,attrs:r})),o&&Array.from(a.querySelectorAll("template")).forEach(a=>z({icons:e,nameAttr:t,attrs:r,root:a.content,inTemplates:o})),"data-lucide"===t){const t=a.querySelectorAll("[icon-name]");t.length>0&&(console.warn("[Lucide] Some icons were found with the now deprecated icon-name attribute. These will still be replaced for backwards compatibility, but will no longer be supported in v1.0 and you should switch to data-lucide"),Array.from(t).forEach(t=>g(t,{nameAttr:"icon-name",icons:e,attrs:r})))}};
/**
       * @license lucide v0.562.0 - ISC
       *
       * This source code is licensed under the ISC license.
       * See the LICENSE file in the root directory of this source tree.
       */class k{constructor(){this.pdfProcessor=new i,this.ui=new d,this.referenceImageUrl="../assets/reference-back-side.jpg",this.allPageImages=new Array(16).fill(null),this.init()}async init(){try{await this.pdfProcessor.initialize(),this.setupEventListeners(),this.checkLibraries(),this.generatePagePlaceholders(),this.ui.setStatus("Upload a PDF file to get started","info"),z({icons:{BookOpen:v,FileText:f,Edit:x,Star:y,ArrowRight:m,ImageIcon:b,CheckCircle:u,Mail:w}})}catch(e){console.error("Initialization error:",e),this.ui.setStatus("Failed to initialize. Please refresh the page and check your internet connection.","error"),l.error("Initialization Error","Failed to load required libraries. Please check your internet connection.")}}setupEventListeners(){this.ui.elements.pdfUpload?.addEventListener("change",e=>this.handleFileUpload(e)),this.ui.on("fileSelected",e=>this.processPDF(e.file)),this.ui.on("print",()=>this.handlePrint()),this.ui.on("export",()=>this.handleExport()),this.ui.on("paperSizeChanged",e=>this.updatePaperSettings(e)),this.ui.on("orientationChanged",e=>this.updatePaperSettings(e)),this.ui.on("zineTabChanged",e=>this.updateZineView(e)),this.ui.elements.printBtn?.addEventListener("click",()=>this.handlePrint()),this.ui.elements.exportPdfBtn?.addEventListener("click",()=>this.handleExport())}checkLibraries(){const e=Object.entries({"App Modules":!0}).filter(([e,t])=>!t).map(([e])=>e);e.length>0&&(console.warn("Libraries not yet loaded:",e.join(", ")),this.ui.setStatus("Loading required libraries... Please wait.","loading"),setTimeout(()=>this.checkLibraries(),1e3))}generatePagePlaceholders(){const e={1:{title:"Front Cover",desc:"Your story begins here",icon:"book-open"},2:{title:"Inside Front",desc:"Introduction or foreword",icon:"file-text"},3:{title:"Page Content",desc:"Main content area",icon:"edit"},4:{title:"Center Spread",desc:"Focal point of your zine",icon:"star"},5:{title:"More Content",desc:"Continue your story",icon:"arrow-right"},6:{title:"Visual Break",desc:"Artwork or illustration",icon:"image"},7:{title:"Back Inside",desc:"Conclusion or credits",icon:"check-circle"},8:{title:"Back Cover",desc:"Contact info & close",icon:"mail"}},t=[5,4,3,2];for(let r=1;r<=8;r++){const a=document.createElement("article");a.className="fade-in-up",a.style.animationDelay=.1*r+"s",t.includes(r)&&a.classList.add("preview-rotated");const o=document.createElement("div");o.className="page-content",o.id=`content-${r}`;const i=document.createElement("div");i.className="page-number",i.textContent=r;const n=document.createElement("div");n.className="placeholder enhanced",n.innerHTML=this.createPlaceholderContent(r,e[r]);const s=document.createElement("img");s.id=`preview-${r}`,s.alt=`Page ${r} preview`,o.appendChild(i),o.appendChild(n),o.appendChild(s),a.appendChild(o),this.ui.elements.zine.appendChild(a)}}createPlaceholderContent(e,t){return`\n        <div class="placeholder-icon">\n          <i data-lucide="${{"book-open":"book-open","file-text":"file-text",edit:"edit",star:"star","arrow-right":"arrow-right",image:"image","check-circle":"check-circle",mail:"mail"}[t.icon]}" width="48" height="48"></i>\n        </div>\n        <div class="placeholder-content">\n          <h4 class="placeholder-title">${t.title}</h4>\n          <p class="placeholder-desc">${t.desc}</p>\n        </div>\n        <div class="placeholder-hint">\n          <span class="hint-text">Upload PDF to see your content here</span>\n          <div class="hint-arrow">\n            <i data-lucide="arrow-right" width="16" height="16"></i>\n          </div>\n        </div>\n      `}async handleFileUpload(e){const t=e.target.files[0];t&&await this.processPDF(t)}revokePageImages(){this.allPageImages.forEach(e=>{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}),this.allPageImages.fill(null)}async processPDF(e){try{this.ui.showProgress("Starting PDF processing...",0),this.revokePageImages();const a=await this.pdfProcessor.loadPDF(e,e=>{this.ui.showProgress(e)}),{numPages:o,fileName:i,fileSize:n}=a,s=Math.min(16,o);this.ui.setStatus(`PDF loaded: ${i} (${t(n)}) - ${o} pages`),l.success("PDF Loaded",`Successfully loaded ${o} pages`);const d=document.getElementById("zine-tabs");d&&(s>8?(d.classList.remove("hidden"),document.getElementById("zine-tab-1")?.classList.add("active"),document.getElementById("zine-tab-2")?.classList.remove("active"),this.currentZine=1):(d.classList.add("hidden"),this.currentZine=1));for(let e=1;e<=s;e++)try{const t=await this.pdfProcessor.renderPage(e,t=>{const r=Math.round((e-1)/s*100);this.ui.showProgress(t,r)}),r=await this.pdfProcessor.canvasToBlob(t),a=URL.createObjectURL(r);this.allPageImages[e-1]=a;const o=8*(this.currentZine-1),i=8*this.currentZine;if(e>o&&e<=i){const t=e>8?e-8:e;this.ui.updatePagePreview(t,a)}const n=Math.round(e/s*100);this.ui.showProgress(`Page ${e} of ${s} converted`,n)}catch(r){console.error(`Failed to process page ${e}:`,r),l.warning(`Page ${e} Error`,"Using blank page as fallback"),await this.createBlankPage(e)}const c=s>8?16:8;for(let e=s+1;e<=c;e++)await this.createBlankPage(e);let p;if(this.ui.hideProgress(),s>8)p=`Created 2 zines: Zine 1 (8 pages) and Zine 2 (${s-8} pages). Use tabs to switch!`;else{const e=8-s;p=e>0?`Converted ${s} page(s). Filled ${e} blank page(s). Ready to print!`:`Successfully converted all ${s} pages. Ready to print!`}this.ui.setStatus(p,"success"),l.success("Processing Complete",p),this.ui.showActionButtons()}catch(a){console.error("PDF processing error:",a),this.ui.hideProgress(),this.ui.setStatus(a.message,"error"),l.error("Processing Error",a.message)}}async createBlankPage(e){const t=document.createElement("canvas");t.width=1e3,t.height=1400;const r=t.getContext("2d");r.fillStyle="#ffffff",r.fillRect(0,0,1e3,1400),r.font="40px Arial",r.fillStyle="#cccccc",r.textAlign="center",r.fillText("Blank Page",500,700);try{const r=await new Promise(e=>t.toBlob(e,"image/png")),a=URL.createObjectURL(r);this.allPageImages[e-1]=a;const o=8*(this.currentZine-1),i=8*this.currentZine;if(e>o&&e<=i){const t=e>8?e-8:e;this.ui.updatePagePreview(t,a)}}catch(a){console.error("Error creating blank page blob:",a)}}updateZineView(e){this.currentZine=e;const t=8*(e-1);for(let r=1;r<=8;r++){const e=t+r-1,a=this.allPageImages[e];a&&this.ui.updatePagePreview(r,a)}}handlePrint(){if(this.ui.hasContent())try{this.createPrintLayout()}catch(e){console.error("Print error:",e),l.error("Print Error","Failed to create print layout")}else l.error("No Content","Please upload a PDF first before printing")}updatePaperSettings(e){this.paperSize=e.paperSize,this.orientation=e.orientation,console.log(`Paper settings updated: ${e.paperSize} ${e.orientation}`)}createPrintLayout(){const e=window.open("","_blank");if(!e)return void l.error("Popup Blocked","Please allow popups for this site to enable printing");const t=this.ui.elements.zine.outerHTML,r=`\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Zine Print Layout</title>\n        <style>\n          * { margin: 0; padding: 0; box-sizing: border-box; }\n          @page { size: ${this.paperSize||"a4"} ${this.orientation||"landscape"}; margin: 0; }\n          body { margin: 0; padding: 0; width: 100%; height: 100vh; overflow: hidden; }\n          .print-page { width: 100%; height: 100vh; page-break-after: always; position: relative; display: block; }\n          .print-page:last-child { page-break-after: auto; }\n          .front-side { display: grid; grid-template-areas: "page5 page4 page3 page2" "page6 page7 page8 page1"; width: 100%; height: 100%; gap: 0; padding: 0; margin: 0; }\n          .back-side { background-image: url('${this.referenceImageUrl}'); background-size: contain; background-repeat: no-repeat; background-position: center; transform: rotate(180deg); width: 100%; height: 100%; }\n          .zine { display: grid; grid-template-areas: "page5 page4 page3 page2" "page6 page7 page8 page1"; width: 100%; height: 100%; gap: 0; padding: 0; margin: 0; }\n          .zine > * { width: 100%; height: 100%; border: none; box-shadow: none; display: grid; grid-template-columns: repeat(15, 1fr); grid-template-rows: repeat(21, 1fr); background-color: white; overflow: hidden; position: relative; }\n          .zine > *:nth-child(1) { grid-area: page1; }\n          .zine > *:nth-child(2) { grid-area: page2; }\n          .zine > *:nth-child(3) { grid-area: page3; }\n          .zine > *:nth-child(4) { grid-area: page4; }\n          .zine > *:nth-child(5) { grid-area: page5; }\n          .zine > *:nth-child(6) { grid-area: page6; }\n          .zine > *:nth-child(7) { grid-area: page7; }\n          .zine > *:nth-child(8) { grid-area: page8; }\n          .zine > *:nth-child(8), .zine > *:nth-child(1), .zine > *:nth-child(2), .zine > *:nth-child(7) { transform: rotate(180deg); }\n          .page-content { grid-column: 1 / -1; grid-row: 1 / -1; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }\n          .page-content img { width: 100%; height: 100%; object-fit: contain; }\n          .page-number { display: none; }\n        </style>\n      </head>\n      <body>\n        <div class="print-page front-side">${t}</div>\n        <div class="print-page back-side"></div>\n      </body>\n      </html>\n    `;e.document.write(r),e.document.close(),e.focus(),e.print(),e.close()}async handleExport(){if(this.ui.hasContent())try{await this.exportAsPDF()}catch(e){console.error("Export error:",e),l.error("Export Error",e.message||"Failed to export PDF")}else l.error("No Content","Please upload a PDF first before exporting")}async exportAsPDF(){try{this.ui.elements.exportPdfBtn.disabled=!0,this.ui.elements.exportPdfBtn.innerHTML='\n        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n        </svg>\n        Exporting...\n      ',l.info("Export Started","Generating PDF... This may take a moment.");const e=this.ui.getPaperDimensions(this.paperSize||"a4",this.orientation||"landscape"),t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="0",t.style.width=e.width+"mm",t.style.height=e.height+"mm",t.style.background="white",t.style.padding="0",t.style.margin="0";const r=new a({orientation:this.orientation||"landscape",unit:"mm",format:this.paperSize||"a4"});document.body.appendChild(t);const i=async a=>{this.allPageImages.filter(e=>e).length>8&&(this.updateZineView(a),await new Promise(e=>setTimeout(e,100)));const i=this.ui.elements.zine.cloneNode(!0);this.prepareZineForExport(i),t.innerHTML="",t.appendChild(i);const n=(await o(i,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:4*e.width,height:4*e.height})).toDataURL("image/png",1);a>1&&r.addPage(),r.addImage(n,"PNG",0,0,e.width,e.height),r.addPage(),await this.addBackSideToPDF(r)};this.allPageImages.filter(e=>e).length>8?(console.log("Exporting 16-page zine (2 parts)..."),await i(1),await i(2),this.updateZineView(1)):(console.log("Exporting 8-page zine..."),await i(1)),document.body.removeChild(t);const n=`zine-export-${(new Date).toISOString().slice(0,19).replace(/:/g,"-")}.pdf`;r.save(n),this.ui.elements.exportPdfBtn.disabled=!1,this.ui.elements.exportPdfBtn.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n          <polyline points="7 10 12 15 17 10"></polyline>\n          <line x1="12" y1="15" x2="12" y2="3"></line>\n        </svg>\n        Export PDF\n      ',this.ui.setStatus(`PDF exported successfully as ${n}`,"success"),l.success("Export Complete",`Saved as ${n}`)}catch(e){throw this.ui.elements.exportPdfBtn.disabled=!1,this.ui.elements.exportPdfBtn.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n          <polyline points="7 10 12 15 17 10"></polyline>\n          <line x1="12" y1="15" x2="12" y2="3"></line>\n        </svg>\n        Export PDF\n      ',e}}prepareZineForExport(e){e.style.display="grid",e.style.gridTemplateAreas='"page5 page4 page3 page2" "page6 page7 page8 page1"',e.style.width="100%",e.style.height="100%",e.style.gap="0",e.style.padding="0",e.style.margin="0",e.style.position="fixed",e.style.top="0",e.style.left="0",e.querySelectorAll("article").forEach((e,t)=>{e.style.width="100%",e.style.height="100%",e.style.border="none",e.style.boxShadow="none";const r=t+1;5!==r&&4!==r&&3!==r&&2!==r||(e.style.transform="rotate(180deg)")});const t=document.createElement("div");t.style.position="absolute",t.style.top="50%",t.style.left="0",t.style.right="0",t.style.height="2px",t.style.background="repeating-linear-gradient(to right, #000 0px, #000 10px, transparent 10px, transparent 20px)",t.style.zIndex="10",t.style.pointerEvents="none",e.appendChild(t)}async addBackSideToPDF(e){return new Promise((t,r)=>{const a=document.createElement("canvas"),o=a.getContext("2d"),i=this.ui.getPaperDimensions(this.paperSize||"a4",this.orientation||"landscape");a.width=4*i.width,a.height=4*i.height;const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{try{o.save(),o.translate(a.width/2,a.height/2),o.rotate(Math.PI),o.drawImage(n,-a.width/2,-a.height/2,a.width,a.height),o.restore();const r=a.toDataURL("image/png",1),i=this.ui.getPaperDimensions(this.paperSize||"a4",this.orientation||"landscape");e.addImage(r,"PNG",0,0,i.width,i.height),t()}catch(i){r(i)}},n.onerror=()=>r(new Error("Failed to load reference image")),n.src=this.referenceImageUrl})}}document.addEventListener("DOMContentLoaded",()=>{new k})}}});
//# sourceMappingURL=index-legacy-Ck8uC5bn.js.map
